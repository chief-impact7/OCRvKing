/*
-----------------------------------------
[Log #1] [2026-01-31 22:14:40]

사용자: 프로젝트 시스템 지침

1. 언어 사용 규칙 (Language Rule)

사용자에게 답변할 때는 물론이고, 작업 계획(implementation_plan.md), 진행 상황(walkthrough.md), 작업 목록(task.md) 등 모든 산출물을 작성하거나 사용자에게 되물을 때(Clarification)에 반드시 '한국어'를 사용하세요. 이모티콘은 절대 사용하지 마세요. 반드시한글로 대화를 유지하세요.


2. 개발 로그 기록 (user_log.js) - [절대 원칙: Append-Only & Project Local]
AI는 기존 로그를 보호하고 누락 없는 기록을 위해 다음 **'무결성 유지 전략'**을 반드시 따릅니다.

1. **저장 위치**: 로그 파일(`user_log.js`)은 반드시 **작업 중인 프로젝트 폴더 내**에 생성하고 관리하세요. 작업중인 프로젝트 폴더가 없다면 로그를 적을필요는 없습니다.
2. *원자적 추가(Atomic Append)**: PowerShell의 `Add-Content` 명령을 사용하여 파일 끝에 내용을 추가하세요. **반드시 `-Encoding utf8` 옵션을 사용하여 한글 깨짐을 방지하세요.*

`.js` 파일 형식을 유지하기 위해, 로그 내용은 전체를 *주석 처리(`/ ... /`)**하거나 **백틱 문자열* 형태로 기록하여 JS 문법 오류를 방지하세요.

명령 예시: `Add-Content -Path "./user_log.js" -Value "/* [로그 내용] */" -Encoding utf8` (프로젝트 내)

3. **로그 일련번호 관리**: 각 로그의 시작에 `[Log #번호]`를 붙이세요.
4. **기록 양식**:
   ```javascript
   /*
   -----------------------------------------
   [Log #번호] [년-월-일 시:분:분]

사용자: (프롬프트 원문 100%)

작업: (수행한 작업 상세 요약)

  -----------------------------------------
   */
   ```

3. 패치 노트 관리 (PATCH_NOTES.js) - [절대 원칙: Latest on Top]

주요 변경 사항이 있을 때만 내용을 정리하여 추가하세요.

로그와 마찬가지로 **해당 프로젝트 폴더 내**에 위치해야 합니다.

**역순 기록 (Prepend)**: 반드시 기존 내용의 "맨 위"에 새 패치 노트를 추가하세요.

양식:

 ```javascript
  /*
  ---------
  [년 월 일]

변경 사항 1

변경 사항 2

 ---------
  */
  (기존 내용...)
  ```

4. 작업 시작 및 로그 연속성 루틴
AI는 매 대화 시작 시 다음 절차를 *반드시* 수행하여 문맥을 동기화합니다.

1. **프로젝트 폴더 내 로그 확인**: 현재 폴더의 `user_log.js`를 확인합니다.
2. **마지막 로그 확인**: `run_command`로 `Get-Content -Tail 20 "user_log.js"`를 실행하여 마지막 로그 번호를 확인하세요.
3. **번호 갱신 및 즉시 기록**: 확인된 번호에 +1을 하여 새로운 로그를 `Add-Content`로 즉시 기록하세요.



[CRITICAL INSTRUCTION: PRE-RESPONSE PROTOCOL]
**경고: 당신은 답변을 출력하기 직전에, 매번 반드시 다음 과정을 내부적으로 수행해야 합니다.**

1. **Review Instructions**: 위에서 정의된 [언어 규칙], [로그 기록], [패치 노트] 규칙을 다시 한번 읽고 숙지하라.
2. **Safety Check**: 지금 작성하려는 답변이 '한국어'인지, '이모티콘'은 없는지, '로그'는 원문 그대로인지 확인하라.
3. **Execute**: 확인이 끝났다면, 규칙을 완벽하게 적용하여 답변을 생성하라.

**이 과정은 사용자가 시키지 않아도 매 대화 턴(Turn)마다 자동으로 수행되어야 합니다.

작업: 시스템 지침 확인 및 첫 로그 생성
-----------------------------------------
*/
/*
-----------------------------------------
[Log #2] [2026-01-31 22:17:21]

사용자: [지시사항 (Instruction)]
당신은 Senior Python Full-Stack Developer이자 Generative AI Expert입니다. 선생님들이 학생들의 시험지를 자동으로 채점할 수 있는 Streamlit 기반의 웹 어플리케이션을 만들어주세요.
... (중략: Streamlit 기반 채점 앱 요구사항 전문) ...

작업: Streamlit 기반 AI 채점 시스템 설계 및 구현 계획 수립
-----------------------------------------
*/
/*
-----------------------------------------
[Log #3] [2026-01-31 22:18:42]

사용자: 제대로 작동하는지 검토하고 더 나은 대안이 있다면 제시해줘

작업: 구현 계획서 검토 및 기술적 개선안(JSON Mode, Drive 권한 이슈, Rate Limit 등) 반영
-----------------------------------------
*/
/*
-----------------------------------------
[Log #4] [2026-01-31 22:20:47]

사용자: 진행해줘

작업: 프로젝트 초기 설정(requirements.txt) 및 Streamlit 메인 UI(app.py) 구현 시작
-----------------------------------------
*/
/*
-----------------------------------------
[Log #5] [2026-01-31 22:21:55]

사용자: (시스템 자동) `pip` 명령어 오류 발생 및 해결 시도

작업: `python -m pip install -r requirements.txt` 명령어로 라이브러리 설치 재시도 중.
-----------------------------------------
*/
/*
-----------------------------------------
[Log #6] [2026-01-31 22:25:24]

사용자: 응 진행해

작업: 채점 로직(`grader.py`) 및 유틸리티(`utils.py`) 구현 시작
-----------------------------------------
*/
/*
-----------------------------------------
[Log #7] [2026-01-31 22:26:58]

사용자: 계속 진행

작업: Google Sheet 내보내기 기능 구현 및 UI 연동.
-----------------------------------------
*/
/*
-----------------------------------------
[Log #8] [2026-01-31 22:29:15]

사용자: 깃헙에 저장했어? 우리 조직에 있는 사람들에게 배포를 하고 싶어

작업: Git 초기화/커밋 및 Streamlit Community Cloud 배포 가이드(DEPLOYMENT.md) 작성
-----------------------------------------
*/
/*
-----------------------------------------
[Log #9] [2026-01-31 22:37:03]

사용자: https://github.com/chief-impact7/OCRvKing 여기에 올려

작업: 원격 저장소 연결(remote add origin) 및 코드 푸시(push) 시도
-----------------------------------------
*/
